<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.12"/>
<title>QuestWeaver: QuestWeaver</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QuestWeaver
   </div>
   <div id="projectbrief">A procedural quest generator</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.12 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li class="current"><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('index.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">QuestWeaver </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://drone.io/github.com/Cultrarius/QuestWeaver"></a> <a href="https://coveralls.io/github/Cultrarius/QuestWeaver?branch=master"></a> <a href="https://creativecommons.org/publicdomain/zero/1.0/deed.de"></a></p>
<p>Procedurally generated quests and stories for computer games.</p>
<p><b>This project is still in its early stages and under heavy development!</b></p>
<h2>Features</h2>
<ul>
<li>Fully <b>portable</b>, <b>serializable</b> quest system, perfect for use in savegames. Supports JSON and a compact binary format.</li>
<li>Separates quest logic from quest data (such as titles/descriptions) by using <b>template files</b>.</li>
<li>Can output the quest properties as simple <b>text or HTML form</b> to support rich formatting in the game.</li>
<li>Uses a complex <b>weighted graph search</b> to create new quests. This results in more interesting and coherent quest stories as world actors and entities can be reused when fitting.</li>
<li>Supports <b>mod directories</b> to overwrite quest templates after deployment.</li>
<li>The game world entities to be used in quests are supplied directly from a game's custom world model.</li>
</ul>
<h2>Documentation</h2>
<p>Have a look at the <a href="http://cultrarius.github.io/QuestWeaver/doxyhtml/">API documentation</a>!</p>
<h2>Usage</h2>
<p>The quest system of a game is not an isolated part of the system as it is heavily involved in the current world state and events. Therefore, the game has to provide the quest system with the necessary information about the game's state and has to fulfill change requests made by the quest system (otherwise the state will be inconsistent).</p>
<p>To use the QuestWeaver system, you have to follow these steps:</p>
<ul>
<li>Implement and register custom <code>TemplateFactory</code> classes that read your custom template files</li>
<li>Implement a custom <code>WorldModel</code> class</li>
<li>Register your wold model and template factories with the <code>QuestWeaver</code> instance</li>
</ul>
<div class="fragment"><div class="line">QuestWeaver Init() {</div><div class="line">    <span class="comment">// Create your template factories</span></div><div class="line">    shared_ptr&lt;QuestTemplateFactory&gt; questFactory = make_shared&lt;MyQuestTemplateFactory&gt;();</div><div class="line">    shared_ptr&lt;StoryTemplateFactory&gt; storyFactory = make_shared&lt;MyStoryTemplateFactory&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// Create Configuration</span></div><div class="line">    WeaverConfig config;</div><div class="line">    config.worldModel = make_unique&lt;MyWorldModel&gt;();</div><div class="line">    config.dirs.modDirectory = <span class="stringliteral">&quot;./Template/&quot;</span>;</div><div class="line">    shared_ptr&lt;WorldListener&gt; myWorldListener = make_shared&lt;MyWorldListener&gt;();</div><div class="line"></div><div class="line">    <span class="comment">// Create the quest system</span></div><div class="line">    QuestWeaver weaver(config);</div><div class="line">    weaver.RegisterQuestTemplateFactory(questFactory);</div><div class="line">    weaver.RegisterStoryTemplateFactory(storyFactory);</div><div class="line">    weaver.GetWorldModel().AddListener(myWorldListener);</div><div class="line"></div><div class="line">    <span class="keywordflow">return</span> weaver;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="comment">// Create new quests</span></div><div class="line">shared_ptr&lt;Quest&gt; newQuest = weaver.CreateNewQuest();</div></div><!-- fragment --><p>Quests usually want to change the world state as well as their own state (e.g. when a quest succeeds). To do that, you can tick the quest system in your game loop and it will take care of the rest by ticking each quest separately. The <code>WorldListener</code> allows you to change the game state whenever the world model was changed by the quest system.</p>
<div class="fragment"><div class="line"><span class="keywordflow">while</span> (<span class="keyword">true</span>) {</div><div class="line">   <span class="comment">// game loop ...</span></div><div class="line"></div><div class="line">   weaver.Tick(delta); <span class="comment">// updates the world state </span></div><div class="line">}</div></div><!-- fragment --><p>You can also fully serialize the quest system, e.g. to create a save game or to debug it:</p>
<div class="fragment"><div class="line"><span class="keywordtype">void</span> SerialTest() {</div><div class="line">    QuestWeaver weaver = Init();</div><div class="line"></div><div class="line">    <span class="comment">// serialize</span></div><div class="line">    stringstream ss; <span class="comment">// can also be a file stream</span></div><div class="line">    weaver.Serialize(ss, StreamType::JSON);</div><div class="line">    cout &lt;&lt; ss.str() &lt;&lt; endl; <span class="comment">// or save it to disk</span></div><div class="line"></div><div class="line">    <span class="comment">// deserialize - it is important to re-register the template factories and the world model listener!</span></div><div class="line">    QuestWeaver deserialized = QuestWeaver::Deserialize(ss, StreamType::JSON, config.dirs);</div><div class="line">    weaver.RegisterQuestTemplateFactory(questFactory);</div><div class="line">    weaver.RegisterStoryTemplateFactory(storyFactory);</div><div class="line">    weaver.GetWorldModel().AddListener(myWorldListener);</div><div class="line">}</div></div><!-- fragment --><h2>Included projects</h2>
<p>This project uses the help of some very fine frameworks:</p>
<ul>
<li>JSON parser: <a href="https://github.com/open-source-parsers/jsoncpp">https://github.com/open-source-parsers/jsoncpp</a></li>
<li>Serialization framework: <a href="http://uscilab.github.io/cereal/">http://uscilab.github.io/cereal/</a></li>
<li>Testing framework: <a href="https://github.com/philsquared/Catch">https://github.com/philsquared/Catch</a> </li>
</ul>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.12 </li>
  </ul>
</div>
</body>
</html>
